/*
 * font.c
 *
 *  Created on: 2010-01-29
 *      Author: john
 */

#include <avr/pgmspace.h>
#include <avr/io.h>
#include "lcd.h"
#include "font.h"

const prog_uchar bigfontA[] PROGMEM = {0x1F, 0x3F, 0x7F, 0x71, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x60, 0x71, 0x3F, 0x1F, 0x06, 0x7E, 0xFE, 0xEE, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x3E, 0xFF, 0xFF, 0x0F, 0x3F, 0x3F, 0x70, 0x60, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0F, 0x1C, 0x78, 0xF0, 0xFF, 0xFF, 0x0F, 0x3F, 0x7F, 0x30, 0x00, 0x00, 0x03, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x60, 0x7F, 0x7F, 0x01, 0x03, 0x03, 0x07, 0x0E, 0x0E, 0x1C, 0x18, 0x38, 0x70, 0x7F, 0x7F, 0x7F, 0x01, 0x07, 0x07, 0x7F, 0x7F, 0x7F, 0x60, 0x60, 0x64, 0x7F, 0x7F, 0x60, 0x00, 0x00, 0x00, 0x00, 0xE1, 0xFF, 0x7F, 0x07, 0x1F, 0x3F, 0x78, 0x70, 0xE0, 0xEE, 0xDF, 0xFF, 0xE1, 0xE0, 0xE0, 0xE0, 0x71, 0x7F, 0x3F, 0xFF, 0xFF, 0xFF, 0xC0, 0x00, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x07, 0x06, 0x06, 0x0E, 0x0C, 0x1F, 0x3F, 0x7F, 0xE0, 0xE0, 0xE0, 0x71, 0x3F, 0x3F, 0x7B, 0xE0, 0xE0, 0xE0, 0xF1, 0x7F, 0x3F, 0x1E, 0x7F, 0xFF, 0xE1, 0xC1, 0xC0, 0xE1, 0xF3, 0x7F, 0x3E, 0x01, 0x01, 0x03, 0x0F, 0xFE, 0xFC, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x07, 0x06, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0F, 0x3E, 0x3E, 0x0F, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x7F, 0x7F, 0x00, 0x00, 0x7F, 0x7F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x1F, 0x07, 0x01, 0x00, 0x00, 0x01, 0x07, 0x1F, 0x3C, 0x10, 0x00, 0x00, 0x07, 0x1F, 0x1F, 0x18, 0x18, 0x00, 0x00, 0x01, 0x03, 0x03, 0x01, 0x00, 0x03, 0x03, 0x03, 0x00, 0x0F, 0x1D, 0x30, 0x30, 0x60, 0x61, 0x63, 0x67, 0x66, 0x6C, 0x66, 0x67, 0x63, 0x60, 0x70, 0x30, 0x1F, 0x3F, 0x3F, 0x07, 0x0E, 0x0E, 0x0C, 0x1C, 0x18, 0x3F, 0x3F, 0x30, 0x70, 0xFC, 0xFC, 0x00, 0x3F, 0x7F, 0x3F, 0x1C, 0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x1C, 0x1C, 0x1C, 0x1C, 0x7F, 0x3F, 0x00, 0x07, 0x0F, 0x1F, 0x38, 0x70, 0x70, 0x60, 0x60, 0x60, 0x60, 0x70, 0x70, 0x3C, 0x1F, 0x0F, 0x00, 0x1F, 0x7F, 0x3F, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7F, 0x3F, 0x00, 0x3F, 0x7F, 0x3F, 0x1C, 0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x1C, 0x1C, 0x1C, 0x1C, 0x7F, 0x3F, 0x00, 0x3F, 0x7F, 0x3F, 0x1C, 0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x1C, 0x1C, 0x1C, 0x1C, 0x7F, 0x3F, 0x00, 0x03, 0x0F, 0x1F, 0x38, 0x70, 0x70, 0x60, 0x60, 0x61, 0x61, 0x70, 0x70, 0x3C, 0x1F, 0x0F, 0x00, 0x3C, 0x7E, 0x7E, 0x38, 0x38, 0x38, 0x3F, 0x3F, 0x3F, 0x38, 0x38, 0x38, 0x38, 0x7E, 0x7E, 0x00, 0x1F, 0x3F, 0x3F, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x0F, 0x3F, 0x3F, 0x00, 0x03, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x70, 0x70, 0x70, 0x78, 0x7F, 0x1F, 0x00, 0x7C, 0xFE, 0x7E, 0x38, 0x39, 0x3B, 0x3F, 0x3F, 0x3F, 0x38, 0x38, 0x38, 0x38, 0xFE, 0x7E, 0x00, 0x3F, 0x7F, 0x7F, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x7F, 0x7F, 0x00, 0x70, 0xF8, 0xF8, 0x7C, 0x7C, 0x7E, 0x7E, 0x76, 0x77, 0x73, 0x73, 0x73, 0x70, 0xFC, 0xFC, 0x00, 0x38, 0x7C, 0x7E, 0x1E, 0x1F, 0x1B, 0x1B, 0x19, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7F, 0x3F, 0x00, 0x07, 0x0F, 0x3F, 0x38, 0x70, 0x60, 0x60, 0x60, 0x60, 0x60, 0x70, 0x78, 0x3C, 0x1F, 0x0F, 0x00, 0x7F, 0xFF, 0x7F, 0x38, 0x38, 0x38, 0x38, 0x38, 0x3F, 0x3F, 0x38, 0x38, 0x38, 0xFF, 0x7F, 0x00, 0x07, 0x0F, 0x3F, 0x38, 0x70, 0x60, 0x60, 0x60, 0x60, 0x61, 0x71, 0x78, 0x3C, 0x1F, 0x0F, 0x00, 0x7F, 0xFF, 0x7F, 0x38, 0x38, 0x38, 0x38, 0x3F, 0x3F, 0x39, 0x38, 0x38, 0x38, 0xFE, 0x7E, 0x00, 0x07, 0x1F, 0x1F, 0x38, 0x38, 0x38, 0x1F, 0x1F, 0x07, 0x00, 0x30, 0x30, 0x3C, 0x3F, 0x3F, 0x00, 0x7F, 0x7F, 0x7F, 0x73, 0x73, 0x73, 0x63, 0x03, 0x03, 0x03, 0x03, 0x03, 0x07, 0x1F, 0x1F, 0x00, 0x7C, 0xFE, 0x7C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x38, 0x3C, 0x1F, 0x0F, 0x00, 0x3C, 0xFE, 0x7E, 0x38, 0x1C, 0x1C, 0x0E, 0x0E, 0x0E, 0x07, 0x07, 0x03, 0x03, 0x01, 0x01, 0x00, 0x78, 0xFC, 0xFC, 0x70, 0x73, 0x73, 0x77, 0x77, 0x36, 0x3E, 0x3E, 0x3C, 0x3C, 0x3C, 0x38, 0x00, 0x1C, 0x3E, 0x3E, 0x1E, 0x0F, 0x07, 0x03, 0x01, 0x03, 0x07, 0x0F, 0x0E, 0x1C, 0x7E, 0x3E, 0x00, 0x38, 0x7C, 0x7C, 0x1C, 0x1C, 0x0E, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x07, 0x1F, 0x1F, 0x00, 0x3F, 0x3F, 0x3F, 0x38, 0x38, 0x39, 0x01, 0x03, 0x07, 0x0E, 0x1E, 0x1C, 0x38, 0x3F, 0x3F, 0x00};
const prog_uchar bigfontB[] PROGMEM = {0x00, 0x80, 0xC0, 0xC0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0x80, 0xC0, 0xE0, 0x60, 0x70, 0x70, 0xE0, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x20, 0x70, 0xF0, 0xF0, 0x80, 0xC0, 0xE0, 0x70, 0x70, 0x70, 0xE0, 0xC0, 0xE0, 0xF0, 0x70, 0x30, 0x70, 0xF0, 0xE0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xE0, 0xF0, 0xC0, 0xC0, 0xF0, 0xE0, 0x80, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0, 0x60, 0x60, 0xE0, 0xE0, 0xC0, 0x80, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x80, 0x00, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0, 0xE0, 0xC0, 0x80, 0x80, 0xC0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0x80, 0x00, 0x80, 0x80, 0xC0, 0xC0, 0xC0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x3C, 0xF8, 0xE0, 0x80, 0x00, 0x00, 0x80, 0xE0, 0xF8, 0x3C, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFC, 0xFC, 0x00, 0x00, 0xFC, 0xFC, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0x7C, 0x7C, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0xF0, 0x38, 0x38, 0x38, 0x78, 0xF0, 0xC0, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0x60, 0x60, 0x60, 0xE0, 0xE0, 0x60, 0x60, 0x60, 0x60, 0xE0, 0xF0, 0x00, 0x00, 0x00, 0x80, 0x80, 0xC0, 0xC0, 0xE0, 0xE0, 0x60, 0x70, 0x70, 0xF8, 0xF8, 0x18, 0x3C, 0x7F, 0x7E, 0x00, 0xC0, 0xF8, 0xFC, 0x1C, 0x0C, 0x1C, 0xFC, 0xF8, 0xFC, 0x0E, 0x06, 0x06, 0x3E, 0xFC, 0xF8, 0x00, 0xC8, 0xFC, 0xFC, 0x1C, 0x1C, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x3C, 0xF8, 0xF0, 0x00, 0x80, 0xF0, 0xF8, 0x3C, 0x1C, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x0E, 0x1C, 0xFC, 0xF8, 0xE0, 0x00, 0xFC, 0xFC, 0xFC, 0x0C, 0x0C, 0xCC, 0xC0, 0xC0, 0xC0, 0xC0, 0xCE, 0x0E, 0x0E, 0xFE, 0xFE, 0x00, 0xFE, 0xFE, 0xFE, 0x0E, 0x0E, 0xC4, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0xC0, 0xC0, 0x00, 0xE8, 0xFC, 0xFC, 0x1C, 0x1C, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0x1C, 0x1C, 0x3C, 0xFC, 0xF0, 0x00, 0x78, 0xFC, 0x7C, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0xF8, 0x38, 0x38, 0x38, 0x38, 0xFE, 0xFC, 0x00, 0xF0, 0xF8, 0xF8, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xF8, 0xF8, 0x00, 0xFC, 0xFE, 0xFE, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0xF0, 0xE0, 0xC0, 0x00, 0x38, 0x7C, 0x7C, 0x70, 0xE0, 0xC0, 0x80, 0x80, 0xC0, 0xE0, 0x70, 0x70, 0x38, 0x3E, 0x3E, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x0C, 0x0C, 0xFC, 0xFC, 0x00, 0x1C, 0x3E, 0x3E, 0x3C, 0x7C, 0x6C, 0xEC, 0xEC, 0xCC, 0xCC, 0x8C, 0x8C, 0x1C, 0x7F, 0x7E, 0x00, 0x3E, 0x7F, 0x3E, 0x0C, 0x0C, 0x8C, 0x8C, 0xCC, 0xEC, 0xEC, 0x7C, 0x7C, 0x3C, 0x1C, 0x1C, 0x00, 0xC0, 0xF0, 0xF8, 0x38, 0x1C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1C, 0x1C, 0x78, 0xF0, 0xE0, 0x00, 0x00, 0xE0, 0xF0, 0x38, 0x38, 0x18, 0x38, 0xF8, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0xC0, 0xF0, 0xF8, 0x38, 0x1C, 0x1C, 0x0C, 0x0C, 0x0C, 0x8C, 0xDC, 0xF8, 0x78, 0xF8, 0xDC, 0x0C, 0x00, 0xE0, 0xF0, 0x38, 0x38, 0x38, 0x78, 0xF0, 0xE0, 0xE0, 0x70, 0x78, 0x3C, 0x1E, 0x0E, 0x00, 0xD8, 0xF8, 0xF8, 0x38, 0x18, 0x10, 0x00, 0xE0, 0xF8, 0x38, 0x18, 0x18, 0x78, 0xF8, 0xE0, 0x00, 0xFC, 0xFC, 0xFC, 0x9C, 0x9C, 0x9C, 0x8C, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xF0, 0xF0, 0x00, 0x78, 0xFE, 0x7C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x38, 0x78, 0xF0, 0xE0, 0x00, 0x1E, 0x3F, 0x3F, 0x0E, 0x0C, 0x1C, 0x18, 0x38, 0x30, 0x70, 0x70, 0xE0, 0xE0, 0xC0, 0xC0, 0x00, 0x3C, 0x7E, 0x7E, 0x0C, 0x9C, 0x9C, 0xDC, 0xDC, 0xD8, 0xF8, 0xF8, 0x78, 0x78, 0x78, 0x38, 0x00, 0x1C, 0x3E, 0x3E, 0x3C, 0x78, 0x70, 0xE0, 0xC0, 0xE0, 0xF0, 0x78, 0x38, 0x1C, 0x3F, 0x3E, 0x00, 0x38, 0x7C, 0x7C, 0x70, 0x70, 0xE0, 0xC0, 0xC0, 0x80, 0x80, 0x80, 0x80, 0x80, 0xF0, 0xF0, 0x00, 0xF8, 0xF8, 0xF8, 0x70, 0xE0, 0xE0, 0xC0, 0x80, 0x00, 0x18, 0x18, 0x18, 0x18, 0xF8, 0xF8, 0x00};

void
font_init (void)
{
	LCD_COMM = CGRAM_ADR;
	LCD_DATA = (uint8_t) SAG;
	LCD_DATA = (uint8_t) (SAG >> 8);

	lcd_set_cursor_pointer (CGRAM_START);

	lcd_write_data ();

	uint16_t n;
	for (n=0;n<16*16;n++)
	{
		LCD_DATA = 0x00;
	}

	for (n=0;n<43*16;n++)
	{
		LCD_DATA = pgm_read_byte(&(bigfontA[n]));
	}

	for (n=0;n<16*16;n++)
	{
		LCD_DATA = 0x00;
	}

	for (n=0;n<43*16;n++)
	{
		LCD_DATA = pgm_read_byte(&(bigfontB[n]));
	}
}

void
font_draw_string
(
	uint8_t *string,
	uint16_t addr,
	uint8_t length
)
{
	uint8_t n = 0;
	lcd_set_cursor_pointer (addr);
	lcd_write_data ();

	while (n < length)
	{
		LCD_DATA = *(string + n) + ASCII_OFFSETA;
		LCD_DATA = *(string + n) + ASCII_OFFSETB;
		n++;
	}
}
